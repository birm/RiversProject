version: '2'

services:
  database:
    image: mariadb:10.6
    container_name: rivers-db
    environment:
      MARIADB_USER: user
      MARIADB_PASSWORD: user
      MARIADB_ROOT_PASSWORD: toor
    ports:
      - "3306:3306"
  ingest:
    build: ./Fetch/
    depends_on:
      - "database"
    container_name: rivers-in
    command: python getData.py
    environment:
      CREATE_TABLES: "ANY_VALUE_HERE_IS_TRUE"
      CREATE_DATABASE: "y"
      INSERT_SITES: "y"
      INSERT_OBSERVATIONS: "y"
      PRINT_DATA: "y"
  web:
    build:
      context: ./Web/
      args:
        JAR_FILE: ./target/rivers-0.0.1-SNAPSHOT.jar
    ports:
      - "8080:8080"
    depends_on:
      - "database"
    container_name: rivers-web
